
@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    /* Imperial Purple (#6A0DAD), Patina Green (#3EB991), Roman Aqua (#20B2AA), Conchoidal Gray (#8C94A8), Vitreous White (#F5FFFA), Obsidian Black (#1C1934), Gold (#FFD700) */

    /* --- Light Theme --- */
    /* Background: Vitreous White (using a light mint hue for base) */
    --background-h: 150; --background-s: 100%; --background-l: 98%; /* Slightly brighter */
    --background-l-offset: 98%; /* For body background */
    /* Foreground: Obsidian Black (darkened for text) */
    --foreground-h: 255; --foreground-s: 15%; --foreground-l: 12%; /* Slightly darker for more contrast */

    /* Card: Very Light Purple for cards */
    --card-h: 275; --card-s: 52%; --card-l: 97%; --card-a: 0.5; /* Softer glass, less alpha */
    --card-foreground-h: var(--foreground-h); --card-foreground-s: var(--foreground-s); --card-foreground-l: var(--foreground-l);

    --popover-h: var(--card-h); --popover-s: var(--card-s); --popover-l: var(--card-l); --popover-a: var(--card-a);
    --popover-foreground-h: var(--card-foreground-h); --popover-foreground-s: var(--card-foreground-s); --popover-foreground-l: var(--card-foreground-l);

    /* Primary: Imperial Purple - adjusted for light theme */
    --primary-h: 275; --primary-s: 55%; --primary-l: 50%; /* Slightly less saturated, bit brighter */
    --primary-foreground-h: 0; --primary-foreground-s: 0%; --primary-foreground-l: 100%; /* White */
    --primary-gradient-start-h: 275; --primary-gradient-start-s: 53%; --primary-gradient-start-l: 45%;

    /* Secondary: Roman Aqua */
    --secondary-h: 177; --secondary-s: 75%; --secondary-l: 42%; /* Slightly more vivid */
    --secondary-foreground-h: 0; --secondary-foreground-s: 0%; --secondary-foreground-l: 100%; /* White */

    /* Muted: Conchoidal Gray - for less important text */
    --muted-h: 220; --muted-s: 22%; --muted-l: 70%; /* Lighter for subtle text */
    --muted-foreground-h: 220; --muted-s: 18%; --muted-foreground-l: 50%; /* Darker Conchoidal Gray */

    /* Accent: Gold */
    --accent-h: 48; --accent-s: 100%; --accent-l: 50%; /* #FFC300 - slightly warmer gold */
    --accent-foreground-h: 48; --accent-foreground-s: 100%; --accent-foreground-l: 12%; /* Dark Gold/Brown for text on accent */

    --destructive-h: 0; --destructive-s: 86%; --destructive-l: 58%;
    --destructive-foreground-h: 0; --destructive-foreground-s: 0%; --destructive-foreground-l: 98%;

    /* Border: Lighter Conchoidal Gray - for general borders */
    --border-h: 220; --border-s: 25%; --border-l: 90%; /* Softer border */
    --input-h: 220; --input-s: 30%; --input-l: 95%; /* Lighter input bg */
    --ring-h: var(--accent-h); --ring-s: var(--accent-s); --ring-l: var(--accent-l); /* Ring uses accent */

    --chart-1-h: var(--primary-h); --chart-1-s: var(--primary-s); --chart-1-l: var(--primary-l);
    --chart-2-h: 177; --chart-2-s: 75%; --chart-2-l: 42%; /* Roman Aqua for progress/cyan */
    --chart-3-h: var(--accent-h); --chart-3-s: var(--accent-s); --chart-3-l: var(--accent-l); /* Gold */
    --chart-4-h: 158; --chart-4-s: 55%; --chart-4-l: 58%; /* Patina Green for success */
    --chart-5-h: var(--destructive-h); --chart-5-s: var(--destructive-s); --chart-5-l: var(--destructive-l); /* Red for errors */

    /* TopBar Specific Colors - Light Theme */
    --topbar-bg-h: 0; --topbar-bg-s: 0%; --topbar-bg-l: 97%; --topbar-bg-a: 0.50; /* Softer glass, less alpha */
    --topbar-border-h: 220; --topbar-border-s: 20%; --topbar-border-l: 88%; --topbar-border-a: 0.2; /* Lighter border, increased alpha */


    /* Full HSL color definitions */
    --background: hsl(var(--background-h), var(--background-s), var(--background-l));
    --foreground: hsl(var(--foreground-h), var(--foreground-s), var(--foreground-l));
    --card: hsla(var(--card-h), var(--card-s), var(--card-l), var(--card-a));
    --card-foreground: hsl(var(--card-foreground-h), var(--card-foreground-s), var(--card-foreground-l));
    --popover: hsla(var(--popover-h), var(--popover-s), var(--popover-l), var(--popover-a));
    --popover-foreground: hsl(var(--popover-foreground-h), var(--popover-foreground-s), var(--popover-foreground-l));
    --primary: hsl(var(--primary-h), var(--primary-s), var(--primary-l));
    --primary-foreground: hsl(var(--primary-foreground-h), var(--primary-foreground-s), var(--primary-foreground-l));
    --primary-gradient-start: hsl(var(--primary-gradient-start-h), var(--primary-gradient-start-s), var(--primary-gradient-start-l));
    --secondary: hsl(var(--secondary-h), var(--secondary-s), var(--secondary-l));
    --secondary-foreground: hsl(var(--secondary-foreground-h), var(--secondary-foreground-s), var(--secondary-foreground-l));
    --muted: hsl(var(--muted-h), var(--muted-s), var(--muted-l));
    --muted-foreground: hsl(var(--muted-foreground-h), var(--muted-foreground-s), var(--muted-foreground-l));
    --accent: hsl(var(--accent-h), var(--accent-s), var(--accent-l));
    --accent-foreground: hsl(var(--accent-foreground-h), var(--accent-foreground-s), var(--accent-foreground-l));
    --destructive: hsl(var(--destructive-h), var(--destructive-s), var(--destructive-l));
    --destructive-foreground: hsl(var(--destructive-foreground-h), var(--destructive-foreground-s), var(--destructive-foreground-l));
    --border: hsl(var(--border-h), var(--border-s), var(--border-l));
    --input: hsl(var(--input-h), var(--input-s), var(--input-l));
    --ring: hsl(var(--ring-h), var(--ring-s), var(--ring-l));
    --chart-1: hsl(var(--chart-1-h), var(--chart-1-s), var(--chart-1-l));
    --chart-2: hsl(var(--chart-2-h), var(--chart-2-s), var(--chart-2-l));
    --chart-3: hsl(var(--chart-3-h), var(--chart-3-s), var(--chart-3-l));
    --chart-4: hsl(var(--chart-4-h), var(--chart-4-s), var(--chart-4-l));
    --chart-5: hsl(var(--chart-5-h), var(--chart-5-s), var(--chart-5-l));
    --radius: 0.75rem; /* Slightly more rounded for softness */
  }

  .dark {
    /* --- Dark Theme --- */
    /* Background: Deep Dark Purple (derived from #1a102c / #6A0DAD) */
    --background-h: 275; --background-s: 45%; --background-l: 8%; /* Even darker for deeper space feel */
    --background-l-offset: 8%; /* For body background */
    /* Foreground: Light Gray/Off-White */
    --foreground-h: 210; --foreground-s: 30%; --foreground-l: 96%; /* Slightly brighter white */

    /* Card: Darker, slightly desaturated Purple base for cards (rgba(40, 30, 60, 0.5)) */
    --card-h: 275; --card-s: 35%; --card-l: 16%; --card-a: 0.35; /* More transparent glass, less alpha */
    --card-foreground-h: var(--foreground-h); --card-foreground-s: var(--foreground-s); --card-foreground-l: var(--foreground-l);

    --popover-h: var(--card-h); --popover-s: var(--card-s); --popover-l: var(--card-l); --popover-a: var(--card-a);
    --popover-foreground-h: var(--card-foreground-h); --popover-foreground-s: var(--card-foreground-s); --popover-foreground-l: var(--card-foreground-l);

    /* Primary: Vibrant Magenta/Pink (#e0359e / #6A0DAD) */
    --primary-h: 275; --primary-s: 75%; --primary-l: 60%; /* Brighter, more vibrant primary */
    --primary-foreground-h: 0; --primary-foreground-s: 0%; --primary-foreground-l: 100%; /* White */
    --primary-gradient-start-h: 275; --primary-gradient-start-s: 70%; --primary-gradient-start-l: 50%; /* Darker shade for gradient start */

    /* Secondary: Bright Blue/Cyan (#00bcd4 / #20B2AA) */
    --secondary-h: 177; --secondary-s: 100%; --secondary-l: 45%; /* More vivid secondary */
    --secondary-foreground-h: 210; --secondary-foreground-s: 100%; --secondary-foreground-l: 10%; /* Dark text for contrast */

    /* Muted: Conchoidal Gray - for less important text, now white for TopBar */
    --muted-h: 220; --muted-s: 18%; --muted-l: 65%; /* Slightly adjusted */
    --muted-foreground-h: 0; --muted-foreground-s: 0%; --muted-foreground-l: 100%; /* White for TopBar text */

    /* Accent: Gold (#FFD700) - using the warmer gold from light theme */
    --accent-h: 48; --accent-s: 100%; --accent-l: 55%; /* #FFC300 - slightly brighter in dark */
    --accent-foreground-h: 48; --accent-foreground-s: 100%; --accent-foreground-l: 8%; /* Dark Brown/Black for text on gold */

    --destructive-h: 0; --destructive-s: 75%; --destructive-l: 55%; /* #ff4d4f - adjusted */
    --destructive-foreground-h: 0; --destructive-foreground-s: 0%; --destructive-foreground-l: 98%;

    /* Border: Muted Cool Gray for general borders (#8C94A8 based) or specific glass border */
    --border-h: 275; --border-s: 15%; --border-l: 25%; /* Darker, more purple-tinted border for elements */
    /* Specific glass panel border is defined in .glassmorphism-panel */
    --input-h: 275; --input-s: 25%; --input-l: 18%; /* Darker input, matching card's feel */
    --ring-h: var(--accent-h); --ring-s: var(--accent-s); --ring-l: calc(var(--accent-l) + 5%); /* Brighter accent for ring */

    /* Chart colors - Dark Theme specific adjustments */
    --chart-1-h: var(--primary-h); --chart-1-s: var(--primary-s); --chart-1-l: var(--primary-l); /* Primary Color */
    --chart-2-h: 177; --chart-2-s: 100%; --chart-2-l: 45%; /* Cyan (Consistent with secondary) for progress */
    --chart-3-h: var(--accent-h); --chart-3-s: var(--accent-s); --chart-3-l: var(--accent-l); /* Gold */
    --chart-4-h: 158; --chart-4-s: 65%; --chart-4-l: 50%; /* Patina Green (#3EB991) for success */
    --chart-5-h: var(--destructive-h); --chart-5-s: var(--destructive-s); --chart-5-l: var(--destructive-l); /* Red for errors */

    /* TopBar Specific Colors - Dark Theme */
    --topbar-bg-h: 275; --topbar-bg-s: 30%; --topbar-bg-l: 12%; --topbar-bg-a: 0.45; /* Darker, more purple glass, less alpha */
    --topbar-border-h: 275; --topbar-border-s: 20%; --topbar-border-l: 30%; --topbar-border-a: 0.2; /* Lighter border, increased alpha */
  }
}

@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground;
    font-family: 'Lexend', sans-serif;
  }
  .dark body {
    background-color: hsl(var(--background-h), var(--background-s), var(--background-l-offset));
  }
  h1, h2, h3, h4, h5, h6, .font-headline {
    font-family: 'Comfortaa', sans-serif;
  }
}

/* Iridescent Aurora Background */
.iridescent-purple-bg-light {
  background: linear-gradient(160deg,
    hsl(var(--primary-h), var(--primary-s), calc(var(--primary-l) + 15%)), /* Lighter Imperial Purple base */
    hsl(var(--chart-4-h), var(--chart-4-s), calc(var(--chart-4-l) + 20%)), /* Lighter Patina Green base */
    hsl(var(--secondary-h), var(--secondary-s), calc(var(--secondary-l) + 25%)) /* Lighter Roman Aqua base */
  );
  background-size: 200% 200%;
  animation: aurora-glow 20s ease-in-out infinite alternate;
}

.dark .iridescent-purple-bg-dark {
  background: linear-gradient(160deg,
    hsl(var(--primary-h), var(--primary-s), calc(var(--primary-l) - 52%)), /* Darker Imperial Purple base (target ~8% L) */
    hsl(var(--chart-4-h), var(--chart-4-s), calc(var(--chart-4-l) - 42%)), /* Darker Patina Green base (target ~8% L) */
    hsl(var(--secondary-h), var(--secondary-s), calc(var(--secondary-l) - 37%)) /* Darker Roman Aqua base (target ~8% L) */
  );
  background-size: 200% 200%;
  animation: aurora-glow 20s ease-in-out infinite alternate;
}


/* Glassmorphism Panel Style */
.glassmorphism-panel {
  /* Light Theme Glass */
  background-color: hsla(var(--card-h), var(--card-s), var(--card-l), var(--card-a));
  backdrop-filter: blur(12px) saturate(1.05); /* Reduced blur slightly */
  -webkit-backdrop-filter: blur(12px) saturate(1.05);
  border: 1px solid hsla(var(--primary-h), var(--primary-s), calc(var(--primary-l) + 25%), 0.2); /* Softer, lighter primary-tinted border */
  border-radius: var(--radius);
  box-shadow: 0 6px 24px hsla(var(--foreground-h), var(--foreground-s), calc(var(--foreground-l) + 70%), 0.08), /* Softer, more subtle shadow */
              0 2px 8px hsla(var(--foreground-h), var(--foreground-s), calc(var(--foreground-l) + 70%), 0.04);
}

.dark .glassmorphism-panel {
  /* Dark Theme Glass */
  background-color: hsla(var(--card-h), var(--card-s), var(--card-l), var(--card-a));
  backdrop-filter: blur(14px) saturate(1.1); /* Slightly increased blur for dark */
  -webkit-backdrop-filter: blur(14px) saturate(1.1);
  border: 1px solid hsla(var(--border-h), var(--border-s), calc(var(--border-l) + 5%), 0.25); /* Refined: Use theme border color, slightly lighter, more opaque */
  border-radius: var(--radius);
  box-shadow: 0 6px 24px hsla(var(--background-h), var(--background-s), calc(var(--background-l) - 2%), 0.2), /* Shadow using a darker background shade */
              0 2px 8px hsla(var(--background-h), var(--background-s), calc(var(--background-l) - 2%), 0.15);
}


::-webkit-scrollbar {
  width: 5px; /* Narrower scrollbar */
  height: 5px;
}
::-webkit-scrollbar-track {
  background: hsla(var(--background-h), var(--background-s), calc(var(--background-l) + 2%), 0.2); /* More transparent track */
  border-radius: 10px;
}
.dark ::-webkit-scrollbar-track {
  background: hsla(var(--background-h), var(--background-s), calc(var(--background-l) + 1%), 0.2);
}
::-webkit-scrollbar-thumb {
  background: hsla(var(--muted-h), var(--muted-s), calc(var(--muted-l) - 15%), 0.4); /* Darker, more transparent thumb */
  border-radius: 10px;
}
::-webkit-scrollbar-thumb:hover {
  background: hsl(var(--muted-h), var(--muted-s), calc(var(--muted-l) - 10%));
}

.btn-gradient-primary-accent {
  background: linear-gradient(to right, hsl(var(--primary-gradient-start-h), var(--primary-gradient-start-s), var(--primary-gradient-start-l)), hsl(var(--primary-h), var(--primary-s), var(--primary-l)));
  color: hsl(var(--primary-foreground-h), var(--primary-foreground-s), var(--primary-foreground-l));
  transition: filter 0.2s ease, transform 0.15s ease-out, box-shadow 0.2s ease;
  box-shadow: 0 1px 4px hsla(var(--primary-h), var(--primary-s), var(--primary-l), 0.25);
}
.btn-gradient-primary-accent:hover {
  filter: brightness(1.1) saturate(1.03);
  transform: translateY(-1px);
  box-shadow: 0 2px 8px hsla(var(--primary-h), var(--primary-s), var(--primary-l), 0.35);
}
.btn-gradient-primary-accent:disabled {
  @apply opacity-60 cursor-not-allowed filter-none transform-none shadow-none;
}

.btn-wabi-sabi {
  @apply px-4 py-2 rounded-md text-sm font-medium flex items-center justify-center transition-colors duration-150 ease-in-out;
  background-color: hsl(var(--secondary-h), 30%, 70%); /* Muted Secondary (Light Theme) */
  color: hsl(var(--secondary-h), 25%, 20%); /* Darker text for light mode based on secondary */
  border: 1px solid hsl(var(--secondary-h), 25%, 63%);
  box-shadow: 0 1px 2px hsla(var(--foreground-h), var(--foreground-s), var(--foreground-l), 0.05);
}
.btn-wabi-sabi:hover {
  background-color: hsl(var(--secondary-h), 30%, 65%);
  border-color: hsl(var(--secondary-h), 25%, 58%);
}
.btn-wabi-sabi:disabled {
  @apply opacity-60 cursor-not-allowed filter-none transform-none shadow-none;
  background-color: hsl(var(--secondary-h), 20%, 80%);
  border-color: hsl(var(--secondary-h), 15%, 75%);
  color: hsl(var(--secondary-h), 20%, 40%);
}

.dark .btn-wabi-sabi {
  background-color: hsl(var(--secondary-h), 20%, 30%); /* Dark Muted Secondary */
  color: hsl(var(--secondary-h), 30%, 85%); /* Lighter text for dark mode based on secondary */
  border: 1px solid hsl(var(--secondary-h), 15%, 25%);
}
.dark .btn-wabi-sabi:hover {
  background-color: hsl(var(--secondary-h), 20%, 35%);
  border-color: hsl(var(--secondary-h), 15%, 30%);
}
.dark .btn-wabi-sabi:disabled {
  background-color: hsl(var(--secondary-h), 10%, 20%);
  border-color: hsl(var(--secondary-h), 5%, 15%);
  color: hsl(var(--secondary-h), 15%, 50%);
}

.react-draggable-dragging {
  border: 2px dashed hsla(var(--accent-h), var(--accent-s), var(--accent-l), 0.7) !important; /* Use accent for dragging */
  box-shadow: 0 0 25px hsla(var(--accent-h), var(--accent-s), var(--accent-l), 0.4);
  transition: box-shadow 0.2s ease-out, border-color 0.2s ease-out;
}

/* TopBar specific background - now glassmorphism */
.topbar-custom-bg {
  background-color: hsla(var(--topbar-bg-h), var(--topbar-bg-s), var(--topbar-bg-l), var(--topbar-bg-a));
  backdrop-filter: blur(10px) saturate(1.05); /* Adjusted blur */
  -webkit-backdrop-filter: blur(10px) saturate(1.05);
  border-bottom: 1px solid hsla(var(--topbar-border-h), var(--topbar-border-s), var(--topbar-border-l), var(--topbar-border-a));
  box-shadow: 0 1px 8px hsla(var(--background-h), var(--background-s), calc(var(--background-l) - 10%), 0.1); /* Subtle shadow */
}

/* Active Nav Link in TopBar */
.active-nav-link-dark { /* For Dark theme */
  background-color: hsla(var(--primary-h), var(--primary-s), var(--primary-l), 0.8) !important;
  color: hsl(var(--primary-foreground-h), var(--primary-foreground-s), var(--primary-foreground-l)) !important;
  box-shadow: 0 0 12px hsla(var(--primary-h), var(--primary-s), var(--primary-l), 0.25);
}
.active-nav-link-dark:hover { /* For Dark theme */
  background-color: hsla(var(--primary-h), var(--primary-s), calc(var(--primary-l) + 3%), 0.9) !important;
}

/* Progress bar custom color (Roman Aqua / Cyan - Chart 2) */
.progress-custom {
  background-color: hsl(var(--chart-2-h), var(--chart-2-s), var(--chart-2-l)) !important;
}

/* Status badges for Live Orchestration Feed (using chart colors) */
.badge-success { /* Patina Green */
  background-color: hsl(var(--chart-4-h), var(--chart-4-s), var(--chart-4-l)) !important;
  color: hsl(var(--foreground-h), var(--foreground-s), 5%) !important; /* Darker text on light green */
}
.dark .badge-success {
  color: hsl(var(--background-h), var(--background-s), 95%) !important; /* Lighter text on dark green */
}

.badge-failure { /* Red */
  background-color: hsl(var(--chart-5-h), var(--chart-5-s), var(--chart-5-l)) !important;
  color: hsl(var(--destructive-foreground-h), var(--destructive-foreground-s), var(--destructive-foreground-l)) !important;
}
.details-link-success { /* Patina Green based */
  color: hsl(var(--chart-4-h), var(--chart-4-s), calc(var(--chart-4-l) - 15%)) !important;
}
.dark .details-link-success {
  color: hsl(var(--chart-4-h), var(--chart-4-s), calc(var(--chart-4-l) + 15%)) !important;
}

.details-link-failure { /* Red based */
  color: hsl(var(--chart-5-h), var(--chart-5-s), calc(var(--chart-5-l) - 10%)) !important;
}
.dark .details-link-failure {
  color: hsl(var(--chart-5-h), var(--chart-5-s), calc(var(--chart-5-l) + 10%)) !important;
}

@keyframes aurora-glow {
  0% {
    background-position: 0% 50%;
    filter: hue-rotate(0deg) brightness(1);
  }
  50% {
    background-position: 100% 50%;
    filter: hue-rotate(15deg) brightness(1.05) saturate(1.15);
  }
  100% {
    background-position: 0% 50%;
    filter: hue-rotate(0deg) brightness(1);
  }
}
